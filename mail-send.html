<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>메일 보내기 | 스마트코아솔루션</title>
  <meta name="description" content="FormSubmit을 통해 실제 이메일을 전송합니다">
  <link rel="manifest" href="/manifest.webmanifest">
  <meta name="theme-color" content="#0a487c">
  <link rel="icon" href="/icons/icon-192.png">
  <link rel="stylesheet" href="/styles.css">
  <style>
    .mail-container {
      max-width: 760px;
      margin: 0 auto;
      padding: 20px;
    }
    
    .mail-title {
      font-size: 32px;
      font-weight: 800;
      color: #059669;
      border-bottom: 4px solid #059669;
      padding-bottom: 12px;
      margin-bottom: 24px;
      text-align: center;
    }
    
    .mail-description {
      text-align: center;
      margin-bottom: 32px;
      color: #374151;
      line-height: 1.6;
      padding: 20px;
      background: #f0fdf4;
      border-radius: 12px;
      border: 2px solid #22c55e;
    }
    
    .mail-description h3 {
      margin: 0 0 16px 0;
      color: #059669;
      font-size: 20px;
    }
    
    .mail-description p {
      margin: 0;
      font-size: 16px;
    }

    /* 공지사항 섹션 스타일 */
    .announcements-section {
      margin-bottom: 32px;
      padding: 24px;
      background: #f8fafc;
      border-radius: 12px;
      border: 2px solid #e2e8f0;
    }

    .announcements-title {
      font-size: 20px;
      font-weight: 700;
      color: #1e3a8a;
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .announcements-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .announcement-item {
      padding: 16px;
      margin-bottom: 12px;
      background: white;
      border-radius: 8px;
      border: 1px solid #e2e8f0;
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .announcement-item:hover {
      border-color: #3b82f6;
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.1);
      transform: translateY(-2px);
    }

    .announcement-item:last-child {
      margin-bottom: 0;
    }

    .announcement-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 8px;
    }

    .announcement-title {
      font-weight: 600;
      color: #1e293b;
      font-size: 16px;
      line-height: 1.4;
      margin: 0;
      flex: 1;
    }

    .announcement-meta {
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 4px;
    }

    .announcement-priority {
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
    }

    .announcement-priority.high {
      background: #fef2f2;
      color: #dc2626;
    }

    .announcement-priority.medium {
      background: #fffbeb;
      color: #d97706;
    }

    .announcement-priority.low {
      background: #f0fdf4;
      color: #059669;
    }

    .announcement-date {
      font-size: 12px;
      color: #64748b;
      font-weight: 500;
    }

    .announcement-content {
      color: #475569;
      font-size: 14px;
      line-height: 1.5;
      margin-bottom: 8px;
    }

    .announcement-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .announcement-tag {
      padding: 4px 8px;
      background: #f1f5f9;
      color: #475569;
      border-radius: 6px;
      font-size: 11px;
      font-weight: 500;
    }

    .no-announcements {
      text-align: center;
      color: #64748b;
      padding: 40px 20px;
      font-style: italic;
    }
    
    .field {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-bottom: 16px;
    }
    
    .field input,
    .field textarea {
      padding: 14px 16px;
      border: 2px solid #c7d6f0;
      border-radius: 10px;
      font-size: 15px;
      background: #ffffff;
      color: #1e3a8a;
      transition: all 0.3s ease;
    }
    
    .field input:focus,
    .field textarea:focus {
      border-color: #059669;
      box-shadow: 0 0 0 3px rgba(5, 150, 105, 0.1);
      outline: none;
    }
    
    .field textarea {
      min-height: 140px;
      resize: vertical;
    }
    
    .field-label {
      font-weight: 700;
      color: #059669;
      font-size: 16px;
      margin-bottom: 4px;
    }
    
    .radio-group {
      display: flex;
      gap: 20px;
      margin-top: 8px;
    }
    
    .radio-item {
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
    }
    
    .radio-item input[type="radio"] {
      width: 18px;
      height: 18px;
      accent-color: #059669;
    }
    
    .radio-text {
      font-weight: 600;
      color: #374151;
    }
    
    .help {
      font-size: 13px;
      color: #059669;
      font-weight: 500;
      margin-top: 4px;
    }
    
    .error {
      color: #dc2626;
      font-size: 13px;
      margin-top: 6px;
      display: none;
      font-weight: 600;
      background: #fef2f2;
      padding: 8px 12px;
      border-radius: 6px;
      border-left: 4px solid #dc2626;
    }
    
    .ok {
      color: #059669;
      font-size: 14px;
      display: none;
      font-weight: 600;
      background: #f0fdf4;
      padding: 12px 16px;
      border-radius: 8px;
      border: 2px solid #22c55e;
      text-align: center;
    }
    
    .submit-section {
      margin-top: 24px;
      padding: 24px;
      background: #f0fdf4;
      border-radius: 12px;
      border: 2px solid #22c55e;
      text-align: center;
    }
    
    .submit-section h3 {
      margin: 0 0 16px 0;
      color: #059669;
      font-size: 20px;
    }
    
    .submit-section p {
      margin: 0 0 20px 0;
      color: #059669;
      line-height: 1.6;
    }
    
    .mail-btn {
      background: #059669;
      color: white;
      border: none;
      border-radius: 10px;
      padding: 16px 32px;
      font-size: 18px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }
    
    .mail-btn:hover {
      background: #047857;
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(5, 150, 105, 0.3);
    }
    
    .contact-info {
      margin-top: 32px;
      color: #1e3a8a;
      line-height: 1.7;
      font-weight: 500;
      padding: 20px;
      background: #f0f4ff;
      border-radius: 12px;
      border: 2px solid #c7d6f0;
    }
    
    .contact-info h4 {
      margin: 0 0 16px 0;
      color: #1e3a8a;
      font-size: 18px;
    }
    
    .contact-info div {
      margin-bottom: 8px;
    }
    
    .contact-info a {
      color: #1e3a8a;
      text-decoration: none;
      font-weight: 600;
    }
    
    .contact-info a:hover {
      text-decoration: underline;
    }
    
    .navigation-links {
      display: flex;
      gap: 16px;
      justify-content: center;
      margin-top: 24px;
    }
    
    .nav-link {
      padding: 12px 24px;
      border-radius: 8px;
      text-decoration: none;
      font-weight: 600;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }
    
    .nav-link.primary {
      background: #1e3a8a;
      color: white;
      border: 2px solid #1e3a8a;
    }
    
    .nav-link.primary:hover {
      background: #1e40af;
      transform: translateY(-2px);
    }
    
    .nav-link.secondary {
      background: transparent;
      color: #1e3a8a;
      border: 2px solid #1e3a8a;
    }
    
    .nav-link.secondary:hover {
      background: #1e3a8a;
      color: white;
      transform: translateY(-2px);
    }
    
    @media (max-width: 768px) {
      .mail-container {
        padding: 16px;
      }
      
      .mail-title {
        font-size: 24px;
      }
      
      .radio-group {
        flex-direction: column;
        gap: 12px;
      }
      
      .navigation-links {
        flex-direction: column;
        align-items: center;
      }
      
      .nav-link {
        width: 100%;
        max-width: 300px;
        justify-content: center;
      }

      .announcement-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
      }

      .announcement-meta {
        align-items: flex-start;
      }
    }
  </style>
</head>
<body>
  <nav>
    <div class="nav-inner">
      <div class="brand">
        <a href="/"><img src="/icons/icon-192.png" alt="SCS"></a>
        <div class="title">메일 보내기</div>
      </div>
      <div class="menu">
        <a href="/" class="nav-btn home-btn">홈</a>
        <a href="/contact.html" class="nav-btn">문의하기</a>
        <a href="/mail-send.html" class="nav-btn active">메일 보내기</a>
      </div>
    </div>
  </nav>

  <section class="section container mail-container">
    <div class="mail-title">📧 메일 보내기</div>
    
    <div class="mail-description">
      <h3>FormSubmit을 통한 실제 이메일 전송</h3>
      <p>
                 이 페이지에서는 FormSubmit 서비스를 통해 실제로 이메일이 전송됩니다.<br>
         문의하신 내용이 <strong>jangck33@naver.com</strong>으로 즉시 전송되며,<br>
         빠른 시일 내에 답변드리도록 하겠습니다.
      </p>
    </div>

    <!-- 공지사항 섹션 추가 -->
    <div class="announcements-section">
      <h3 class="announcements-title">
        📢 최신 공지사항
      </h3>
      <ul class="announcements-list" id="announcementsList">
        <!-- 공지사항이 여기에 동적으로 로드됩니다 -->
      </ul>
    </div>

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <form id="mailForm" action="https://formsubmit.co/jangck33@naver.com" method="POST">
         <!-- FormSubmit 설정 -->
         <input type="hidden" name="_subject" value="[문의] 스마트코아솔루션 홈페이지">
         <input type="hidden" name="_next" value="/thank-you.html">
         <input type="hidden" name="_captcha" value="false">
      
      <div class="field">
        <label class="field-label">이름 *</label>
        <input type="text" id="name" name="name" placeholder="이름을 입력하세요" autocomplete="name" required>
        <div id="nameErr" class="error">이름을 입력해 주세요.</div>
      </div>
      
      <div class="field">
        <label class="field-label">이메일 *</label>
        <input type="email" id="email" name="email" placeholder="이메일 주소를 입력하세요" autocomplete="email" required>
        <div id="emailErr" class="error">올바른 이메일 주소를 입력해 주세요.</div>
      </div>
      
      <div class="field">
        <label class="field-label">메시지 *</label>
        <textarea id="message" name="message" placeholder="문의하실 내용을 자세히 입력해 주세요" required></textarea>
        <div id="msgErr" class="error">메시지를 입력해 주세요.</div>
      </div>
      
      <div class="field">
        <label class="field-label">공개 여부</label>
        <div class="radio-group">
          <label class="radio-item">
            <input type="radio" name="visibility" value="공개" checked>
            <span class="radio-text">공개</span>
          </label>
          <label class="radio-item">
            <input type="radio" name="visibility" value="비공개">
            <span class="radio-text">비공개</span>
          </label>
        </div>
        <div class="help">공개 문의는 누구나 조회할 수 있고, 비공개 문의는 비밀번호로만 조회 가능합니다.</div>
      </div>
      
      <div class="field" id="passwordField" style="display: none;">
        <label class="field-label">비밀번호</label>
        <input type="password" id="password" name="password" placeholder="비밀번호 (4-12자)" minlength="4" maxlength="12">
        <div class="help">비공개 문의를 조회할 때 사용할 비밀번호를 입력하세요.</div>
        <div id="passwordErr" class="error">비밀번호를 입력해 주세요.</div>
      </div>
      
      <div class="submit-section">
        <h3>📧 이메일 전송</h3>
        <p>
                     아래 버튼을 클릭하면 FormSubmit을 통해<br>
           실제 이메일이 <strong>jangck33@naver.com</strong>으로 전송됩니다.
        </p>
        <button type="submit" class="mail-btn">
          📧 메일 보내기
        </button>
      </div>
      
      <div id="okMsg" class="ok">메일이 성공적으로 전송되었습니다!</div>
    </form>

    <div class="contact-info">
      <h4>📞 연락처 정보</h4>
             <div><strong>이메일</strong>: <a href="mailto:jangck33@naver.com">jangck33@naver.com</a></div>
      <div><strong>FAX</strong>: 0504-081-2473</div>
      <div><strong>주소</strong>: 08798 서울시 관악구 낙성대역 14길 39, 309호</div>
    </div>
    
    <div class="navigation-links">
      <a href="/contact.html" class="nav-link secondary">
        📝 문의하기로 이동
      </a>
      <a href="/inquiry-status.html" class="nav-link primary">
        📋 문의 조회하기
      </a>
    </div>
  </section>

  <footer class="footer">
    <div class="container">SmartCoreSolution, Inc. © 2025</div>
  </footer>

  <script>
    // 공지사항 관련 함수들
    function loadAnnouncements() {
      const saved = localStorage.getItem('announcements');
      if (saved) {
        const announcements = JSON.parse(saved);
        displayAnnouncements(announcements);
      } else {
        displayAnnouncements([]);
      }
    }

    function displayAnnouncements(announcements) {
      const container = document.getElementById('announcementsList');
      if (!container) return;

      if (announcements.length === 0) {
        container.innerHTML = '<li class="no-announcements">등록된 공지사항이 없습니다.</li>';
        return;
      }

      // 최신 5개만 표시
      const recentAnnouncements = announcements.slice(0, 5);
      
      container.innerHTML = recentAnnouncements.map(announcement => `
        <li class="announcement-item" onclick="showAnnouncementDetail(${announcement.id})">
          <div class="announcement-header">
            <h4 class="announcement-title">${escapeHtml(announcement.title)}</h4>
            <div class="announcement-meta">
              <span class="announcement-priority ${announcement.priority}">
                ${getPriorityText(announcement.priority)}
              </span>
              <span class="announcement-date">
                ${formatDate(announcement.createdAt)}
              </span>
            </div>
          </div>
          <div class="announcement-content">
            ${escapeHtml(announcement.content.substring(0, 100))}${announcement.content.length > 100 ? '...' : ''}
          </div>
          ${announcement.tags.length > 0 ? `
            <div class="announcement-tags">
              ${announcement.tags.map(tag => `
                <span class="announcement-tag">${escapeHtml(tag)}</span>
              `).join('')}
            </div>
          ` : ''}
        </li>
      `).join('');
    }

    function getPriorityText(priority) {
      const priorityMap = {
        'high': '높음',
        'medium': '보통',
        'low': '낮음'
      };
      return priorityMap[priority] || priority;
    }

    function formatDate(dateString) {
      const date = new Date(dateString);
      const now = new Date();
      const diffTime = Math.abs(now - date);
      const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
      
      if (diffDays === 1) {
        return '오늘';
      } else if (diffDays === 2) {
        return '어제';
      } else if (diffDays <= 7) {
        return `${diffDays - 1}일 전`;
      } else {
        return date.toLocaleDateString('ko-KR', {
          month: 'short',
          day: 'numeric'
        });
      }
    }

    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    function showAnnouncementDetail(id) {
      const saved = localStorage.getItem('announcements');
      if (saved) {
        const announcements = JSON.parse(saved);
        const announcement = announcements.find(a => a.id === id);
        if (announcement) {
          alert(`제목: ${announcement.title}\n\n내용: ${announcement.content}`);
        }
      }
    }

    // 공개/비공개 라디오 버튼 이벤트
    document.addEventListener('DOMContentLoaded', function() {
      // 공지사항 로드
      loadAnnouncements();

      const visibilityRadios = document.querySelectorAll('input[name="visibility"]');
      const passwordField = document.getElementById('passwordField');
      const passwordInput = document.getElementById('password');
      
      visibilityRadios.forEach(radio => {
        radio.addEventListener('change', function() {
          if (this.value === '비공개') {
            passwordField.style.display = 'block';
            passwordInput.required = true;
          } else {
            passwordField.style.display = 'none';
            passwordInput.required = false;
            passwordInput.value = '';
            document.getElementById('passwordErr').style.display = 'none';
          }
        });
      });
      
      // 폼 제출 이벤트
      const form = document.getElementById('mailForm');
      form.addEventListener('submit', function(e) {
        const name = document.getElementById('name').value.trim();
        const email = document.getElementById('email').value.trim();
        const message = document.getElementById('message').value.trim();
        const visibility = document.querySelector('input[name="visibility"]:checked').value;
        const password = document.getElementById('password').value.trim();
        
        // 유효성 검사
        let valid = true;
        const emailRe = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        
        // 이름 검사
        if (!name) {
          document.getElementById('nameErr').style.display = 'block';
          valid = false;
        } else {
          document.getElementById('nameErr').style.display = 'none';
        }
        
        // 이메일 검사
        if (!emailRe.test(email)) {
          document.getElementById('emailErr').style.display = 'block';
          valid = false;
        } else {
          document.getElementById('emailErr').style.display = 'none';
        }
        
        // 메시지 검사
        if (!message) {
          document.getElementById('msgErr').style.display = 'block';
          valid = false;
        } else {
          document.getElementById('msgErr').style.display = 'none';
        }
        
        // 비공개일 때 비밀번호 검사
        if (visibility === '비공개') {
          if (password.length < 4 || password.length > 12) {
            document.getElementById('passwordErr').style.display = 'block';
            document.getElementById('passwordErr').textContent = '비밀번호는 4-12자로 입력해 주세요.';
            valid = false;
          } else {
            document.getElementById('passwordErr').style.display = 'none';
          }
        } else {
          document.getElementById('passwordErr').style.display = 'none';
        }
        
        if (!valid) {
          e.preventDefault();
          return false;
        }
        
        // 성공 메시지 표시
        document.getElementById('okMsg').style.display = 'block';
        document.getElementById('okMsg').textContent = '📧 메일 전송 중... 잠시만 기다려 주세요.';
        
        // FormSubmit이 자동으로 처리하므로 폼은 그대로 제출됨
      });
    });
  </script>
</body>
</html>
